{"ast":null,"code":"import _slicedToArray from\"/projects/lordabbet/repo/captivate-common-lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Grid}from'@material-ui/core';import{ThemeProvider}from'@material-ui/styles';import useStyles from'./styles';import theme from'../../public/assets/theme';import RoleSelection from'./RoleSelection';import GeoSelector from'./GeoSelector';import{mobileView,ErrorHandler,WarningHandler,getCookie,setCookie}from'../../common';/*\r\n * RoleSelector Component\r\n * */var RoleSelector=function RoleSelector(props){var data=props.data,error=props.error,warning=props.warning;var _ref=data||{},header=_ref.header,subHeader=_ref.subHeader,legalDisclosure=_ref.legalDisclosure,countries=_ref.countries,defaultCountry=_ref.defaultCountry;var classes=useStyles();var isMobile=mobileView();var _useState=useState(function(){var showOverlay=true;var knownUserCookie=getCookie('fulfillmentCenterRRID');var laInternalCookie=getCookie('IS_LA_INTERNAL');var roleCookie=getCookie('LA_ROLETYPE');if(roleCookie!==undefined||window.location.search.includes('et_rid')||knownUserCookie!==undefined||laInternalCookie==='TRUE'){showOverlay=false;}return showOverlay;}),_useState2=_slicedToArray(_useState,2),showRoleSelector=_useState2[0],setShowRoleSelector=_useState2[1];var _useState3=useState(function(){return countries&&countries.filter(function(country){return country.name===defaultCountry;})[0].roles;}),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];return React.createElement(ThemeProvider,{theme:theme},error&&error.message!==undefined&&React.createElement(ErrorHandler,error),warning&&warning.warningMessage!==undefined&&React.createElement(WarningHandler,warning),data!==undefined&&showRoleSelector&&React.createElement(Grid,{container:true,\"data-testid\":\"gridContainer\",className:classes.overlay,justify:\"center\"},React.createElement(Grid,{item:true,xs:12,sm:8,md:6,lg:4,xl:4,className:classes.container},React.createElement(Grid,{container:true},React.createElement(Grid,{item:true,xs:12,sm:12,md:12,lg:12,xl:12,className:classes.header,\"data-testid\":\"roleHeader\"},header&&header)),React.createElement(Grid,{container:true},React.createElement(Grid,{item:true,xs:12,sm:12,md:12,lg:12,xl:12,className:classes.subHeader},'Please select your location.')),React.createElement(Grid,{container:true},React.createElement(Grid,{item:true,xs:12,sm:12,md:12,lg:12,xl:12,className:\"\".concat(classes.geoSelector,\" \").concat(isMobile?classes.geoSelectorMobile:'')},countries&&Object.keys(countries).length>0&&React.createElement(GeoSelector,{onChange:function onChange(val){setRoles(val.value.roles);},data:countries,defaultCountry:defaultCountry}))),React.createElement(Grid,{container:true},React.createElement(Grid,{item:true,xs:12,sm:12,md:12,lg:12,xl:12,className:classes.subHeader,\"data-testid\":\"roleSubheader\"},subHeader&&subHeader)),roles&&roles.length>0&&React.createElement(RoleSelection,{classes:classes,roles:roles,setShowRoleSelector:setShowRoleSelector,setCookie:setCookie}))));};RoleSelector.defaultProps={selected:'united_states'};export default RoleSelector;","map":{"version":3,"sources":["/projects/lordabbet/repo/captivate-common-lib/src/components/RoleSelector/index.js"],"names":["React","useState","Grid","ThemeProvider","useStyles","theme","RoleSelection","GeoSelector","mobileView","ErrorHandler","WarningHandler","getCookie","setCookie","RoleSelector","props","data","error","warning","header","subHeader","legalDisclosure","countries","defaultCountry","classes","isMobile","showOverlay","knownUserCookie","laInternalCookie","roleCookie","undefined","window","location","search","includes","showRoleSelector","setShowRoleSelector","filter","country","name","roles","setRoles","message","warningMessage","overlay","container","geoSelector","geoSelectorMobile","Object","keys","length","val","value","defaultProps","selected"],"mappings":"2JAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CAEA,OAAQC,IAAR,KAAmB,mBAAnB,CACA,OAAQC,aAAR,KAA4B,qBAA5B,CAEA,MAAOC,CAAAA,SAAP,KAAsB,UAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,2BAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,OAAQC,UAAR,CAAoBC,YAApB,CAAkCC,cAAlC,CAAkDC,SAAlD,CAA6DC,SAA7D,KAA6E,cAA7E,CAEA;;KAGA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,IACrBC,CAAAA,IADqB,CACGD,KADH,CACrBC,IADqB,CACfC,KADe,CACGF,KADH,CACfE,KADe,CACRC,OADQ,CACGH,KADH,CACRG,OADQ,UAE4CF,IAAI,EAAI,EAFpD,CAErBG,MAFqB,MAErBA,MAFqB,CAEbC,SAFa,MAEbA,SAFa,CAEFC,eAFE,MAEFA,eAFE,CAEeC,SAFf,MAEeA,SAFf,CAE0BC,cAF1B,MAE0BA,cAF1B,CAG5B,GAAMC,CAAAA,OAAO,CAAGnB,SAAS,EAAzB,CACA,GAAMoB,CAAAA,QAAQ,CAAGhB,UAAU,EAA3B,CAJ4B,cAMoBP,QAAQ,CAAC,UAAM,CAC3D,GAAIwB,CAAAA,WAAW,CAAG,IAAlB,CACA,GAAMC,CAAAA,eAAe,CAAGf,SAAS,CAAC,uBAAD,CAAjC,CACA,GAAMgB,CAAAA,gBAAgB,CAAGhB,SAAS,CAAC,gBAAD,CAAlC,CACA,GAAMiB,CAAAA,UAAU,CAAGjB,SAAS,CAAC,aAAD,CAA5B,CAEA,GACIiB,UAAU,GAAKC,SAAf,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,QAAvB,CAAgC,QAAhC,CADA,EAEAP,eAAe,GAAKG,SAFpB,EAGAF,gBAAgB,GAAK,MAJzB,CAKE,CACEF,WAAW,CAAG,KAAd,CACH,CACD,MAAOA,CAAAA,WAAP,CACH,CAfuD,CAN5B,wCAMrBS,gBANqB,eAMHC,mBANG,8BAuBFlC,QAAQ,CAAC,UAAM,CACrC,MAAOoB,CAAAA,SAAS,EAAIA,SAAS,CAACe,MAAV,CAAiB,SAACC,OAAD,QAAaA,CAAAA,OAAO,CAACC,IAAR,GAAiBhB,cAA9B,EAAjB,EAA+D,CAA/D,EAAkEiB,KAAtF,CACH,CAFiC,CAvBN,yCAuBrBA,KAvBqB,eAuBdC,QAvBc,eA2B5B,MACI,qBAAC,aAAD,EAAe,KAAK,CAAEnC,KAAtB,EACKW,KAAK,EAAIA,KAAK,CAACyB,OAAN,GAAkBZ,SAA3B,EAAwC,oBAAC,YAAD,CAAkBb,KAAlB,CAD7C,CAEKC,OAAO,EAAIA,OAAO,CAACyB,cAAR,GAA2Bb,SAAtC,EAAmD,oBAAC,cAAD,CAAoBZ,OAApB,CAFxD,CAGKF,IAAI,GAAKc,SAAT,EAAsBK,gBAAtB,EACG,oBAAC,IAAD,EACI,SAAS,KADb,CAEI,cAAY,eAFhB,CAGI,SAAS,CAAEX,OAAO,CAACoB,OAHvB,CAII,OAAO,CAAC,QAJZ,EAMI,oBAAC,IAAD,EACI,IAAI,KADR,CAEI,EAAE,CAAE,EAFR,CAGI,EAAE,CAAE,CAHR,CAII,EAAE,CAAE,CAJR,CAKI,EAAE,CAAE,CALR,CAMI,EAAE,CAAE,CANR,CAOI,SAAS,CAAEpB,OAAO,CAACqB,SAPvB,EASI,oBAAC,IAAD,EAAM,SAAS,KAAf,EACI,oBAAC,IAAD,EACI,IAAI,KADR,CAEI,EAAE,CAAE,EAFR,CAGI,EAAE,CAAE,EAHR,CAII,EAAE,CAAE,EAJR,CAKI,EAAE,CAAE,EALR,CAMI,EAAE,CAAE,EANR,CAOI,SAAS,CAAErB,OAAO,CAACL,MAPvB,CAQI,cAAY,YARhB,EAUKA,MAAM,EAAIA,MAVf,CADJ,CATJ,CAwBI,oBAAC,IAAD,EAAM,SAAS,KAAf,EACI,oBAAC,IAAD,EACI,IAAI,KADR,CAEI,EAAE,CAAE,EAFR,CAGI,EAAE,CAAE,EAHR,CAII,EAAE,CAAE,EAJR,CAKI,EAAE,CAAE,EALR,CAMI,EAAE,CAAE,EANR,CAOI,SAAS,CAAEK,OAAO,CAACJ,SAPvB,EASK,8BATL,CADJ,CAxBJ,CAsCI,oBAAC,IAAD,EAAM,SAAS,KAAf,EACI,oBAAC,IAAD,EACI,IAAI,KADR,CAEI,EAAE,CAAE,EAFR,CAGI,EAAE,CAAE,EAHR,CAII,EAAE,CAAE,EAJR,CAKI,EAAE,CAAE,EALR,CAMI,EAAE,CAAE,EANR,CAOI,SAAS,WAAKI,OAAO,CAACsB,WAAb,aAA4BrB,QAAQ,CAAGD,OAAO,CAACuB,iBAAX,CAA+B,EAAnE,CAPb,EASKzB,SAAS,EAAI0B,MAAM,CAACC,IAAP,CAAY3B,SAAZ,EAAuB4B,MAAvB,CAAgC,CAA7C,EACG,oBAAC,WAAD,EACI,QAAQ,CAAE,kBAACC,GAAD,CAAS,CACfV,QAAQ,CAACU,GAAG,CAACC,KAAJ,CAAUZ,KAAX,CAAR,CACH,CAHL,CAII,IAAI,CAAElB,SAJV,CAKI,cAAc,CAAEC,cALpB,EAVR,CADJ,CAtCJ,CA4DI,oBAAC,IAAD,EAAM,SAAS,KAAf,EACI,oBAAC,IAAD,EACI,IAAI,KADR,CAEI,EAAE,CAAE,EAFR,CAGI,EAAE,CAAE,EAHR,CAII,EAAE,CAAE,EAJR,CAKI,EAAE,CAAE,EALR,CAMI,EAAE,CAAE,EANR,CAOI,SAAS,CAAEC,OAAO,CAACJ,SAPvB,CAQI,cAAY,eARhB,EAUKA,SAAS,EAAIA,SAVlB,CADJ,CA5DJ,CA0EKoB,KAAK,EAAIA,KAAK,CAACU,MAAN,CAAe,CAAxB,EACG,oBAAC,aAAD,EACI,OAAO,CAAE1B,OADb,CAEI,KAAK,CAAEgB,KAFX,CAGI,mBAAmB,CAAEJ,mBAHzB,CAII,SAAS,CAAEvB,SAJf,EA3ER,CANJ,CAJR,CADJ,CAkGH,CA7HD,CA8IAC,YAAY,CAACuC,YAAb,CAA4B,CACxBC,QAAQ,CAAE,eADc,CAA5B,CAIA,cAAexC,CAAAA,YAAf","sourcesContent":["import React, {useState} from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport {Grid} from '@material-ui/core';\r\nimport {ThemeProvider} from '@material-ui/styles';\r\n\r\nimport useStyles from './styles';\r\nimport theme from '../../public/assets/theme';\r\nimport RoleSelection from './RoleSelection';\r\n\r\nimport GeoSelector from './GeoSelector';\r\nimport {mobileView, ErrorHandler, WarningHandler, getCookie, setCookie} from '../../common';\r\n\r\n/*\r\n * RoleSelector Component\r\n * */\r\nconst RoleSelector = (props) => {\r\n    const {data, error, warning} = props;\r\n    const {header, subHeader, legalDisclosure, countries, defaultCountry} = data || {};\r\n    const classes = useStyles();\r\n    const isMobile = mobileView();\r\n\r\n    const [showRoleSelector, setShowRoleSelector] = useState(() => {\r\n        let showOverlay = true;\r\n        const knownUserCookie = getCookie('fulfillmentCenterRRID');\r\n        const laInternalCookie = getCookie('IS_LA_INTERNAL');\r\n        const roleCookie = getCookie('LA_ROLETYPE');\r\n\r\n        if (\r\n            roleCookie !== undefined ||\r\n            window.location.search.includes('et_rid') ||\r\n            knownUserCookie !== undefined ||\r\n            laInternalCookie === 'TRUE'\r\n        ) {\r\n            showOverlay = false;\r\n        }\r\n        return showOverlay;\r\n    });\r\n\r\n    const [roles, setRoles] = useState(() => {\r\n        return countries && countries.filter((country) => country.name === defaultCountry)[0].roles;\r\n    });\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {error && error.message !== undefined && <ErrorHandler {...error}/>}\r\n            {warning && warning.warningMessage !== undefined && <WarningHandler {...warning}/>}\r\n            {data !== undefined && showRoleSelector && (\r\n                <Grid\r\n                    container\r\n                    data-testid=\"gridContainer\"\r\n                    className={classes.overlay}\r\n                    justify=\"center\"\r\n                >\r\n                    <Grid\r\n                        item\r\n                        xs={12}\r\n                        sm={8}\r\n                        md={6}\r\n                        lg={4}\r\n                        xl={4}\r\n                        className={classes.container}\r\n                    >\r\n                        <Grid container>\r\n                            <Grid\r\n                                item\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                xl={12}\r\n                                className={classes.header}\r\n                                data-testid=\"roleHeader\"\r\n                            >\r\n                                {header && header}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid container>\r\n                            <Grid\r\n                                item\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                xl={12}\r\n                                className={classes.subHeader}\r\n                            >\r\n                                {'Please select your location.'}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid container>\r\n                            <Grid\r\n                                item\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                xl={12}\r\n                                className={`${classes.geoSelector} ${isMobile ? classes.geoSelectorMobile : ''}`}\r\n                            >\r\n                                {countries && Object.keys(countries).length > 0 && (\r\n                                    <GeoSelector\r\n                                        onChange={(val) => {\r\n                                            setRoles(val.value.roles);\r\n                                        }}\r\n                                        data={countries}\r\n                                        defaultCountry={defaultCountry}\r\n                                    />\r\n                                )}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid container>\r\n                            <Grid\r\n                                item\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                xl={12}\r\n                                className={classes.subHeader}\r\n                                data-testid=\"roleSubheader\"\r\n                            >\r\n                                {subHeader && subHeader}\r\n                            </Grid>\r\n                        </Grid>\r\n                        {roles && roles.length > 0 && (\r\n                            <RoleSelection\r\n                                classes={classes}\r\n                                roles={roles}\r\n                                setShowRoleSelector={setShowRoleSelector}\r\n                                setCookie={setCookie}\r\n                            />\r\n                        )}\r\n                    </Grid>\r\n                </Grid>\r\n            )}\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nRoleSelector.propTypes = {\r\n    /** RoleSelector header */\r\n    header: PropTypes.string,\r\n    /** RoleSelector sub header */\r\n    subHeader: PropTypes.string,\r\n    /** role details */\r\n    role: PropTypes.array,\r\n    /** Legal disclosure */\r\n    legalDisclosure: PropTypes.string,\r\n    /** Role Selection by Country */\r\n    countries: PropTypes.object,\r\n    /** Default Selected Country */\r\n    defaultCountry: PropTypes.string,\r\n};\r\n\r\nRoleSelector.defaultProps = {\r\n    selected: 'united_states',\r\n};\r\n\r\nexport default RoleSelector;\r\n"]},"metadata":{},"sourceType":"module"}